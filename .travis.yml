language: ruby
bundler_args: --without development
rvm:
  - 1.8.7
  - 1.9.2
  - 1.9.3
  - ree
branches:
  only:
    - master
before_script:
  - 'if [ "$DB" = "mysql" ]; then mysql -e "create database alchemy_cms_dummy_test;" -u root; fi'
  - 'if [ "$DB" = "postgresql" ]; then psql -c "create database alchemy_cms_dummy_test;" -U postgres; fi'
  - "sh -c 'cd spec/dummy && RAILS_ENV=test bundle exec rake db:schema:load'"
script: "bundle exec rspec spec"
env:
  - DB=mysql
  - DB=postgresql
  - DB=sqlite
