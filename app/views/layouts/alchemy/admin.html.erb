<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title><%= render_alchemy_title %></title>
		<%= csrf_meta_tag %>
		<%= stylesheet_link_tag('alchemy/alchemy', :media => 'screen') %>
		<%= stylesheet_link_tag('alchemy/print', :media => 'print') %>
		<%= yield :stylesheets %>
		<script type="text/javascript" charset="utf-8">
			var tinyMCEPreInit = {
				base: '<%= Rails.application.config.assets.prefix %>/tiny_mce',
				suffix: ''
			};
		</script>
		<%= javascript_include_tag('alchemy/alchemy') %>
		<%= yield :javascript_includes %>
	</head>
	<body id="alchemy">
		<div id="overlay">
			<div id="overlay_text_box">
				<%= image_tag('alchemy/ajax_loader.gif', :id => 'ajax_loader') %>
				<span id="overlay_text"><%= _("please_wait") %></span>
			</div>
		</div>
		<div id="main_menu">
			<div id="main_navi">
				<%= yield(:navigation) %>
				<%= admin_main_navigation %>
			</div>
			<div id="main_menu_background"></div>
			<div id="logout">
				<%= link_to_overlay_window("<span class='module icon exit'></span><label>#{_('leave')}</label>".html_safe, leave_admin_path, {:size => "300x140", :title => _("Leave Alchemy")}) %>
			</div>
		</div>
		<div id="top_menu">
			<div id="sub_navigation">
				<%= admin_subnavigation %>
				<div id="subnav_additions">
					<%= yield(:subnav_additions) %>
				</div>
			</div>
			<%= yield(:toolbar) %>
			<%- if current_user -%>
			<div id="user_info">
				<%= _('Logged in as') %> <%= current_user.name %>
			</div>
			<%- end -%>
		</div>
		<%= render :partial => 'alchemy/admin/partials/flash_notices' %>
		<div id="main_content">
			<%= yield %>
		</div>
		<%= yield(:javascripts) %>
		<script type="text/javascript" charset="utf-8">
			jQuery(function($) {
				Alchemy.resizeFrame();
				Alchemy.Tooltips();
				if (typeof(jQuery().sb) === 'function') {
					Alchemy.SelectBox('body#alchemy select');
				}
				if ($('#flash_notices').length > 0) {
					Alchemy.Growler.fade();
				}
				$('#alchemy a.icon_button.please_wait_overlay').click(function() {
					Alchemy.pleaseWaitOverlay();
				});
			});
			jQuery(window).resize(function() {
				Alchemy.resizeFrame();
			});
		</script>
	</body>
</html>
