if @error
  page.replace("element_#{@element.id}_folder_spinner", "<span class='error_icon' title='#{@error}'>!</span>")
else
  page.replace(
    "element_#{@element.id}",
    :partial => "element",
    :object => @element,
    :locals => {:open_element_selector => false}
  )
  page << "jQuery('#element_area').sortable('refresh')"
  if @element.folded
    @richtext_contents.each do |content|
      page << "tinyMCE.execCommand('mceRemoveControl', true, 'contents_content_#{content.id}')"
    end
  else
    page << "jQuery('#element_#{@element.id}').addClass('selected')"
    @richtext_contents.each do |content|
      page << "TinymceHammer.addEditor('contents_content_#{content.id}_body')"
    end
    page << "Alchemy.SelectBox('#element_#{@element.id} select')"
  end
  page << "Alchemy.ElementEditorSelector()"
end
