<%- if @cells -%>
<div id="cells">
	<ul>
		<%- @elements.each do |cell, elements| -%>
		<%- unless elements.blank? -%>
		<li>
			<a href="#cell_<%= cell.nil? ? 'for_other_elements' : cell.name -%>"><%= cell.nil? ? _('other Elements') : t("cell_names.#{cell.name}", :default => cell.name.camelcase) -%></a>
		</li>
		<%- end -%>
		<%- end -%>
	</ul>
	<%- @elements.each do |cell, elements| -%>
	<%- unless elements.blank? -%>
	<div id="cell_<%= cell.nil? ? 'for_other_elements' : cell.name %>" class="with_padding">
		<%= render :partial => 'element', :collection => elements, :locals => {:draggable => true} %>
	</div>
	<%- end -%>
	<%- end -%>
</div>
<%- else -%>
<div id="element_area">
	<%= render :partial => @elements, :locals => {:draggable => true} %>
</div>
<%- end -%>
<script type="text/javascript" charset="utf-8">
	Alchemy.SortableElements(<%= @page.id %>, '<%= form_authenticity_token %>');
	Alchemy.ElementEditorSelector();
	Alchemy.SelectBox('.element_editor select');
	TinymceHammer.init();
	Alchemy.ElementDirtyObserver('#element_area');
	jQuery('#cells').tabs();
	jQuery('#cells').tabs('paging', { follow: false } );
</script>
