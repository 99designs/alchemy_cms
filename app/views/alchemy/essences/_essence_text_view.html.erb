<% cache(essence_text_view) do %>
<% options = local_assigns.fetch(:options, {}) %>
<% html_options = local_assigns.fetch(:html_options, {}) %>
<%- if essence_text_view.essence.link.blank? || options[:disable_link] -%>
<%= essence_text_view.ingredient -%>
<%- else -%>
<%= link_to(
  essence_text_view.ingredient,
  url_for(essence_text_view.essence.link),
  {
    title: essence_text_view.essence.link_title,
    target: (essence_text_view.essence.link_target == "blank" ? "_blank" : nil),
    'data-link-target' => essence_text_view.essence.link_target
  }.merge(html_options)
) %>
<%- end -%>
<% end %>
