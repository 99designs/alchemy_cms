<div class="element_head">
  <div class="element_handle">
    <span class="element_icon"></span>
    <%- if element.description.nil? -%>
    <span class="warning icon" title="<%= t("Warning: Element '%{elementname}' is missing its description.", :scope => :alchemy) % {:elementname => element.name} %>"></span>
    <%- else -%>
    <%= render_icon("element_#{element.public? ? 'public' : 'draft'}") %>
    <%- end -%>
  </div>
  <span class="element_heading">
    <span class="preview_text_element_name"><%= element.display_name %></span>
    <span class="preview_text_quote"><%= sanitize(element.preview_text) %></span>
  </span>
  <span class="ajax_folder" <%= element.trashed? ? 'style="display: none"'.html_safe : '' %>>
    <%= image_tag(
      "alchemy/ajax_loader.gif",
      :style => "display: none",
      :id => "element_#{element.id}_folder_spinner",
      :class => "element_folder_spinner"
    ) %>
    <%= link_to_function(
      "",
      "Alchemy.toggleElement(#{element.id}, '#{fold_admin_element_path(element)}', '#{form_authenticity_token}', {title: '#{ t('Warning!', :scope => :alchemy) }', message: '#{ t('This element has unsaved changes. Do you really want to fold it?', :scope => :alchemy) }', okLabel: '#{ t('Yes', :scope => :alchemy) }', cancelLabel: '#{ t('No', :scope => :alchemy) }'})",
      :class => element.folded? ? 'expand_element' : 'fold_element',
      :title => element.folded? ? t('show_element_content', :scope => :alchemy) : t('hide_element_content', :scope => :alchemy),
      :id => "element_#{element.id}_folder"
    ) %>
  </span>
</div>
