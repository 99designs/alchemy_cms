<div class="picture_detail" id="image_<%= image.id %>" name="<%= image.name %>">
	<div class="archive_image_spinner">
		<%= image_tag("ajax_loader.gif", :plugin => "alchemy", :alt => '') %>
	</div>
	<div class="picture_image" style="display: none;">
		<%= link_to_function(
			image_tag(
				thumbnail_url(:id => image, :size => "111x93"),
				:alt => image.name,
				:title => _('zoom_image'),
				:onload => 'wa_fade_image(this);'
			),
			"image_zoom('images/show_in_window/#{image.id}', '#{image.name}', #{image.image_width || 320}, #{image.image_height || 240})"
		) %>
		<%- permitted_to?(:destroy, :images) do -%>
		<span class="picture_tool_delete">
			<%= delete_with_confirmation_link(
				"",
				_("confirm_to_delete_image_from_server"),
				image_path(
					:id => image,
					:query => params[:query],
					:page => params[:page],
					:per_page => params[:per_page]
				),
				{
					:title => _('Delete image')
				}
			) -%>
		</span>
		<%- end -%>
	</div>
	<%# leave this as one line, or the inplace editor renders a textarea instead of an input field %>
	<span class="picture_name" title="<%= image.name %>" id="image_<%= dom_id(image) %>_name"><%= image.name.empty? ? nil : shorten(image.name, 25) %></span>
	<%- permitted_to?(:edit, :images) do -%>
	<script type="text/javascript" charset="utf-8">
	//<!--[CDATA[
		new Ajax.InPlaceEditor(
			'image_<%= dom_id(image) %>_name',
			'/images/update/<%= image.id %>',
			{
				highlightcolor: '#fff', 
				cancelText: 'x',
				clickToEditText: '<%= _("rename_image") %>',
				savingText: '<%= _("save") %>',
				okText: '<%= _("save") %>',
				rows: 1,
				size: 25
			}
		);
	//]]-->
	</script>
	<%- end -%>
</div>
